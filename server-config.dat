{
    "MyImouto":  {
                     "getCount":  "function Get-Count{
						param([String]$tags,[switch]$pages)
						$page = [xml](Invoke-WebRequest -Uri \"$($ssconfig.url)/post/index.xml?tags=$tags\")
						if($pages){return [Math]::ceiling($page.posts.count/100)}
						return $page.posts.count
						}",
                     "getPost":  "function Get-Post{
						param([int]$id,[switch]$raw)
						try{
							$postPage = Invoke-WebRequest -Uri \"$($ssconfig.url)/post/show/$id\"
						}catch{
							Write-Host \"The site couldn't be read. You've probably been temporarily blocked for too many queries.`nIf you are sure that this isn't the case, please submit a bug report on this program's Github repo.\"
							return $null
						}
						$tags=($postPage.images|where id -eq \"image\").alt.split(\" \")[0..4] -join \" \"
						$taggedPosts = [xml](Invoke-WebRequest -Uri \"$($ssconfig.url)/post/index.xml?tags=$tags\")
						if($taggedPosts.posts.post -eq $null){
							return $null
						}
						forEach($post in $taggedPosts.posts.post) {
							if($post.id -eq $id){
								if($raw){
									return $post
								}else{
									[dateTime]$timeOrigin = '1970-01-01 00:00:00'
									return @{id=$post.id;file=$post.file_url;uploaded=$timeOrigin.addSeconds($post.created_at);md5=$post.md5;tags=$post.tags;rating=$post.rating}
								}
							}
						}
						}",
                     "getTaggedPosts":  "function Get-TaggedPosts{
						param([String]$tags,[switch]$raw,[int]$count=-1)
						$postArray = @()
						$currentPage=(Invoke-WebRequest -Uri \"$($ssconfig.url)/post/index.xml?tags=$tags\u0026page=1\u0026limit=100\")
						try{
							$currentPage = [xml]$currentPage
						} catch [System.Management.Automation.RuntimeException] {
							$currentPage = [xml][System.Net.WebUtility]::HtmlDecode($currentPage)
						}
						[dateTime]$timeOrigin = '1970-01-01 00:00:00'
						$counter=0
						for ($i=2;$i -le [Math]::ceiling($currentPage.posts.count/100)+1;$i++){
						  forEach($post in $currentPage.posts.post){
							if($counter -eq $count){return $postArray}
							$creationTime = $timeOrigin.addSeconds($post.created_at)
							if($raw){
								$postArray += $post
							}else{
								$postArray += @{id=$post.id;file=$post.file_url;uploaded=$creationTime;md5=$post.md5;tags=$post.tags;rating=$post.rating}
							}
							$counter++
						  }
						  $currentPage=(Invoke-WebRequest -Uri \"$($ssconfig.url)/post/index.xml?tags=$tags\u0026page=$i\u0026limit=100\")
						  try{
							$currentPage = [xml]$currentPage
						  } catch [System.Management.Automation.RuntimeException] {
						  	$currentPage = [xml][System.Net.WebUtility]::HtmlDecode($currentPage)
						  }
						  Write-Host $('Read page ' + $($i-1) + '/' + [Math]::ceiling($currentPage.posts.count/100) + '.')
						}
						return $postArray
						}"
                 },
				 
	"Gelbooru": {
                     "getCount":  "function Get-Count{
						param([String]$tags,[switch]$pages)
						$page = [xml](Invoke-WebRequest -Uri \"$($ssconfig.url)/index.php?page=dapi\u0026s=post\u0026q=index\u0026tags=$tags\")
						if($pages){return [Math]::ceiling($page.posts.count/100)}
						return $page.posts.count
						}",
                     "getPost":  "function Get-Post{
						param([int]$id,[switch]$raw)
						$currentPage=(Invoke-WebRequest -Uri \"$($ssconfig.url)/index.php?page=dapi\u0026s=post\u0026q=index\u0026id=$id\")
						try{
							$currentPage = [xml]$currentPage
						} catch [System.Management.Automation.RuntimeException] {
							$currentPage = [xml][System.Net.WebUtility]::HtmlDecode($currentPage)
						}
						if($currentPage.posts.post -eq $null){
							return $null
						}
						
						if($raw){
							return $currentPage.posts.post
						}else{
							$post = $currentPage.posts.post
							return @{id=$post.id;file=$post.file_url;uploaded=[dateTime]::ParseExact($post.created_at,'ddd MMM dd HH:mm:ss zzz yyyy',$null);md5=$post.md5;tags=$post.tags;rating=$post.rating}
						}
						}",
                     "getTaggedPosts":  "function Get-TaggedPosts{
						param([String]$tags,[switch]$raw,[int]$count=-1)
						$postArray = @()
						$currentPage=(Invoke-WebRequest -Uri \"$($ssconfig.url)/index.php?page=dapi\u0026s=post\u0026q=index\u0026tags=$tags\u0026pid=0\u0026limit=100\")
						try{
							$currentPage = [xml]$currentPage
						} catch [System.Management.Automation.RuntimeException] {
							$currentPage = [xml][System.Net.WebUtility]::HtmlDecode($currentPage)
						}
						$counter=0
						for ($i=1;$i -le [Math]::ceiling($currentPage.posts.count/100);$i++){
						  forEach($post in $currentPage.posts.post){
							if($counter -eq $count){return $postArray}
							$creationTime = [dateTime]::ParseExact($post.created_at,'ddd MMM dd HH:mm:ss zzz yyyy',$null)
							if($raw){
								$postArray += $post
							}else{
								$postArray += @{id=$post.id;file=$post.file_url;uploaded=$creationTime;md5=$post.md5;tags=$post.tags;rating=$post.rating}
							}
							$counter++
						  }
						  $currentPage=(Invoke-WebRequest -Uri \"$($ssconfig.url)/index.php?page=dapi\u0026s=post\u0026q=index\u0026tags=$tags\u0026pid=$i\u0026limit=100\")
						  try{
							$currentPage = [xml]$currentPage
						  } catch [System.Management.Automation.RuntimeException] {
						  	$currentPage = [xml][System.Net.WebUtility]::HtmlDecode($currentPage)
						  }
						  Write-Host $('Read page ' + $i + '/' + [Math]::ceiling($currentPage.posts.count/100) + '.')
						}
						return $postArray
						}"
                 },
				 
	"Shimmie":  {
                     "getCount":  "function Get-Count{
						param([String]$tags,[switch]$pages)
						$page = [xml](Invoke-WebRequest -Uri \"$($ssconfig.url)/api/danbooru/find_posts/index.xml?limit=70\u0026tags=$tags\")
						if($pages){return [Math]::ceiling($page.posts.count/70)}
						return $page.posts.count
						}",
                     "getPost":  "function Get-Post{
						param([int]$id,[switch]$raw)
						$currentPage=(Invoke-WebRequest -Uri \"$($ssconfig.url)/api/danbooru/find_posts/index.xml?id=$id\")
						try{
							$currentPage = [xml]$currentPage
						} catch [System.Management.Automation.RuntimeException] {
							$currentPage = [xml][System.Net.WebUtility]::HtmlDecode($currentPage)
						}
						if($currentPage.posts.post -eq $null){
							return $null
						}
						
						if($raw){
							return $currentPage.posts.post
						}else{
							$post = $currentPage.posts.post
							return @{id=$post.id;file=$post.file_url;uploaded=[dateTime]::ParseExact($post.date.split('.')[0],'yyyy-MM-dd HH:mm:ss',$null);md5=$post.md5;tags=$post.tags;rating=$post.rating}
						}
						}",
                     "getTaggedPosts":  "function Get-TaggedPosts{
						param([String]$tags,[switch]$raw,[int]$count=-1)
						$postArray = @()
						$currentPage=(Invoke-WebRequest -Uri \"$($ssconfig.url)/api/danbooru/find_posts/index.xml?tags=$tags\u0026page=1\u0026limit=70\")
						try{
							$currentPage = [xml]$currentPage
						} catch [System.Management.Automation.RuntimeException] {
							$currentPage = [xml][System.Net.WebUtility]::HtmlDecode($currentPage)
						}
						$counter=0
						for ($i=2;$i -le [Math]::ceiling($currentPage.posts.count/70);$i++){
						  forEach($post in $currentPage.posts.post){
							if($counter -eq $count){return $postArray}
							$creationTime = [dateTime]::ParseExact($post.date.split('.')[0],'yyyy-MM-dd HH:mm:ss',$null)
							if($raw){
								$postArray += $post
							}else{
								$postArray += @{id=$post.id;file=$post.file_url;uploaded=$creationTime;md5=$post.md5;tags=$post.tags;rating=$post.rating}
							}
							$counter++
						  }
						  $currentPage=(Invoke-WebRequest -Uri \"$($ssconfig.url)/api/danbooru/find_posts/index.xml?tags=$tags\u0026page=$i\u0026limit=70\")
						  try{
							$currentPage = [xml]$currentPage
						  } catch [System.Management.Automation.RuntimeException] {
						  	$currentPage = [xml][System.Net.WebUtility]::HtmlDecode($currentPage)
						  }
						  Write-Host $('Read page ' + $i-1 + '/' + [Math]::ceiling($currentPage.posts.count/70) + '.')
						}
						return $postArray
						}"
                 },
	"e621":  {
                     "getCount":  "function Get-Count{
						param([String]$tags,[switch]$pages)
						$page = (Invoke-WebRequest -Uri \"$($ssconfig.url)/posts.json?limit=320\u0026tags=$tags\u0026page=1\"|ConvertFrom-JSON)
						$count = 0
						$pNum = 1
						while(($page.success -ne $false) -and $page.posts[0] -ne $null){
							$count += $page.posts.length
							$pNum++
							$page = (Invoke-WebRequest -Uri \"$($ssconfig.url)/posts.json?limit=320\u0026tags=$tags\u0026page=$pNum\"|ConvertFrom-JSON)
						}
						if($pages){return $pNum-1}
						return $count
						}",
                     "getPost":  "function Get-Post{
						param([int]$id,[switch]$raw)
						$currentPage=(Invoke-WebRequest -Uri \"$($ssconfig.url)/posts.json?limit=1\u0026page=b$($id+1)\"|ConvertFrom-JSON)
						
						if($id -lt 1){
							return $null
						}
						$post = $currentPage.posts[0]
						if($post.id -ne $id){
							Write-Warning 'The post you were looking for could not be found. It was probably deleted.'
							return $null
						}
						
						if($post.file.url -eq $null){
							$post.file.url = ('https://static1.e621.net/data/' + $post.file.md5.Substring(0,2) + '/' + $post.file.md5.Substring(2,2) + '/' + $post.file.md5 + '.' + $post.file.ext)
							if($raw){
								$post.preview.url = ('https://static1.e621.net/data/preview/' + $post.file.md5.Substring(0,2) + '/' + $post.file.md5.Substring(2,2) + '/' + $post.file.md5 + '.jpg')
								$post.sample.url = ('https://static1.e621.net/data/sample/' + $post.file.md5.Substring(0,2) + '/' + $post.file.md5.Substring(2,2) + '/' + $post.file.md5 + '.jpg')
							}
						}
						
						if($raw){
							return $post
						}else{
							$postTags = @()
							forEach($sub in $post.tags.PSObject.Properties){
								$postTags += $sub.value
							}
							return @{id=$post.id;file=$post.file.url;uploaded=[dateTime]::ParseExact($post.created_at,'yyyy-MM-ddTHH:mm:ss.FFFzzzz',$null);md5=$post.file.md5;tags=($postTags -join ' ');rating=$post.rating}
						}
						}",
                     "getTaggedPosts":  "function Get-TaggedPosts{
						param([String]$tags,[switch]$raw,[int]$count=-1)
						
						$postArray = @()
						$currentPage=(Invoke-WebRequest -Uri \"$($ssconfig.url)/posts.json?limit=320\u0026tags=$tags\u0026page=1\"|ConvertFrom-JSON)
						$counter=0
						$pageCounter=1
						
						while(($currentPage.success -ne $false) -and $currentPage.posts[0] -ne $null){
						  forEach($post in $currentPage.posts){
							if($counter -eq $count){return $postArray}
							$creationTime = [dateTime]::ParseExact($post.created_at,'yyyy-MM-ddTHH:mm:ss.FFFzzzz',$null)
							if($post.file.url -eq $null){
								$post.file.url = ('https://static1.e621.net/data/' + $post.file.md5.Substring(0,2) + '/' + $post.file.md5.Substring(2,2) + '/' + $post.file.md5 + '.' + $post.file.ext)
								if($raw){
									$post.preview.url = ('https://static1.e621.net/data/preview/' + $post.file.md5.Substring(0,2) + '/' + $post.file.md5.Substring(2,2) + '/' + $post.file.md5 + '.jpg')
									$post.sample.url = ('https://static1.e621.net/data/sample/' + $post.file.md5.Substring(0,2) + '/' + $post.file.md5.Substring(2,2) + '/' + $post.file.md5 + '.jpg')
								}
							}
							if($raw){
								$postArray += $post
							}else{
								$postTags = @()
								forEach($sub in $post.tags.PSObject.Properties){
									$postTags += $sub.value
								}
								$postArray += @{id=$post.id;file=$post.file.url;uploaded=$creationTime;md5=$post.file.md5;tags=($postTags -join ' ');rating=$post.rating}
							}
							$counter++
						  }
						  Write-Host $(\"Read page $pageCounter.\")
						  $pageCounter++
						  $currentPage=(Invoke-WebRequest -Uri \"$($ssconfig.url)/posts.json?limit=320\u0026tags=$tags\u0026page=$pageCounter\"|ConvertFrom-JSON)
						}
						return $postArray
						}"
                 }
}